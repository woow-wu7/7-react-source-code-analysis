"use strict";

exports.__esModule = true;
exports.useId = exports.IdProvider = undefined;

var _react = require("react");

var _react2 = _interopRequireDefault(_react);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// Most things that we auto-id aren't server rendered, and are rendered into
// portals anyway, so we can get away with random ids in a default context. If
// people need to server render with auto-ids, they can wrap their app in an
// IdProvider
var genId = function genId() {
  return Math.random().toString(32).substring(2);
};

var IdContext = (0, _react.createContext)(genId);

var IdProvider = exports.IdProvider = function IdProvider(_ref) {
  var children = _ref.children;

  var ref = (0, _react.useRef)(0);
  // could use UUID but if we hit 9,007,199,254,740,991 unique components over
  // the lifetime of the app before it gets reloaded, I mean ... come on.
  // I don't even know what xillion that is.
  // /me googles
  // Oh duh, quadrillion. Nine quadrillion components. I think we're okay.
  var genId = (0, _react.useCallback)(function () {
    return ++ref.current;
  }, []);
  return _react2.default.createElement(IdContext.Provider, { value: genId, children: children });
};

var useId = exports.useId = function useId() {
  var genId = (0, _react.useContext)(IdProvider);
  var ref = (0, _react.useRef)(genId());
  return ref.current;
};